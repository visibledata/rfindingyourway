---
title: stringr I need to know
author: Martin John Hadley
date: '2018-02-15'
slug: recipe-networks
categories:
  - dataviz
tags:
  - R
draft: yes
editor_options: 
  chunk_output_type: console
banner: "img/blog-images/header-images/2018-02-07_where-s-the-love-for-htmlwidgets_header-image.png"
---

<!--html_preserve-->
<hr style="margin-top: -10px;margin-bottom: 5px;">
<div class="row">
    <div class="col-sm-4">
        <center> <span class="fa fa-star fa-2x text-center" style="color:Tomato"></span>
            <p><a href='/blog/2018/02/07/2018-xx-xx_reproducible-blogposts/#reproducibility-ratings' data-toggle="tooltip" data-placement="right" title="" data-original-title="Click for info" style='font-weight:bold;color:black;text-decoration:underline;' target='_blank'>Citable Author<i class="fa fa-question-circle "></i></a>
                <br>
                Martin John Hadley
                <br>
                (<a href="https://orcid.org/0000-0002-3039-6849" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="/img/orcid_16x16.png" style="width:1em;margin-right:.2em;" alt="ORCID iD icon" target='_blank'>orcid.org/0000-0002-3039-6849</a>)
        </center>
    </div>
    <div class="col-sm-4">
        <center> <span class="fa fa-star-half-o fa-2x text-center" style="color:Tomato"></span>
            <p><a href='/blog/2018/02/07/2018-xx-xx_reproducible-blogposts/#reproducibility-ratings' data-toggle="tooltip" data-placement="right" title="" data-original-title="Click for info" style='font-weight:bold;color:black;text-decoration:underline;' target='_blank'>Citable Data<i class="fa fa-question-circle "></i></a>
                <br>
                R packages: <a href='https://cran.r-project.org/web/packages/cranlogs/' target='_blank'>cranlogs</a> and <a href='https://cran.r-project.org/web/packages/versions/' target='_blank'>versions</a>
        </center>
    </div>
    <div class="col-sm-4">
        <center> <span class="fa fa-star-half-o fa-2x text-center" style="color:Tomato"></span>
            <p><a href='/blog/2018/02/07/2018-xx-xx_reproducible-blogposts/#reproducibility-ratings' data-toggle="tooltip" data-placement="right" title="" data-original-title="Click for info" style='font-weight:bold;color:black;text-decoration:underline;' target='_blank'>Citable Code<i class="fa fa-question-circle "></i></a>
                <br>
                <a href="https://github.com/visibledata/visibledata.github.io/blob/master/content/blog/2018-02-07_where-s-the-love-for-htmlwidgets.Rmd" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;" target='_blank'><img src="/img/GitHub-Mark-32px.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">.Rmd on GitHub</a>
        </center>
    </div>
</div>

<hr style="margin-top: 5px;margin-bottom: 5px;">

<!--/html_preserve-->

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	message = FALSE,
	warning = FALSE
)
library("emo")
```

```{r}
library("tidyverse")
single_column <- tribble(
  ~id, ~ingredient,
  "a", "pepper",
  "b", "garlic",
  "c", "cayenne_pepper",
  "d", "yellow pepper",
  "e", "black peppercorns",
  "f", "pepper seeds",
  "g", "onion"
)
```

Get all instances of "pepper" anywhere in the string from `single_column`

```{r}
single_column %>%
  filter(str_detect(ingredient, "pepper"))
```

```{r}
list_column <- tribble(
  ~id, ~ingredients,
  "A", list("pepper", "salt"),
  "B", list("garlic", "rice"),
  "C", list("cayenne_pepper", "green pepper", "rice"),
  "D", list("yellow pepper", "garlic"),
  "E", list("black peppercorns", "pepper", "green pepper"),
  "F", list("pepper seeds", "garlic", "rice"),
  "G", list("onion", "garlic")
)
```

Get all instances of "pepper" anywhere in the string from `list_column`

```{r}
list_column %>%
  filter(str_detect(ingredients, "pepper")) %>%
  mutate_if(is.list, simplify_all) %>%
  unnest()
```

Get all recipes where BOTH "pepper" amd "rice" appear:

```{r}
list_column %>%
  filter(str_detect(ingredients, c("rice", "pepper"))) %>%
  mutate_if(is.list, simplify_all) %>%
  unnest()


list_column %>%
  filter(str_detect(ingredients, "rice") & str_detect(ingredients, "pepper")) %>%
  mutate_if(is.list, simplify_all) %>%
  unnest()
```









